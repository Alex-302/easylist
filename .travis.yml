# https://docs.travis-ci.com/user/languages/python/
language: python

# https://docs.travis-ci.com/user/customizing-the-build/#Building-Specific-Branches
branches:
  only:
    - content

# https://docs.travis-ci.com/user/encryption-keys/
env:
  global:
    - secure: "ikfN27v/N7eAbuAE5VBZOYpraHeasLpF9Ko9cbtDCQnhZZQGFz5SZubchdDqhq3WEctiBieqE2e62qCvLkeqrfKfOExsm2dq5XXc7BAPXJAhiPq6bY4G4aGdRz4ccf9V9CofT4LPV+qao5BrsUpCJkilSvuelxhktJJaC1HtUax2TKMUXTpex+qRNrWAzLj8hGnqDneduc70XlDTf6VD2MATR2ljZx5PA/oBDZoGIrEWc3J8G6BNXznUPQubyOlS3umEiBs0CvLVOf7hp6Mz0SJQ98ED45SVZH1krJNzFqEPkM/AL/SMoPn/h+gCCDHQn9rdUQ/InoxYXW4GNejqJfjbWGrYCBnpiraoifmf8oL00gDbUS4EJAeH9eWYRPUeiL1f/gN6qQMIaVFO1CpBdWPc2Zd4BY9ph7252XVb2JJ6SjJ8wna+JGyDHdK22akNI9H/GYeJvMcRKUxG5A8CwjXtZObmZzlqtOHlJBgLVCUmk1UG6Vg8BG2FfcpFer7vgLTCNTyaEmPTYes6bP+dxEKhdWqlrfwDYdzlaZWweSw/xCB5KpgLZO9Ikl4lDJG5mN71PLNhSo3fzeLWdcZeyhlYYD+RKnznZ1MsE0Y7zcnAtS7HoV0B1Op94/5TrG/rEuvyGsOt9e8nFjR73QtrNgKrcZDhB5q4FGsR4KOwbQU="

# https://docs.travis-ci.com/user/customizing-the-build/#The-Build-Lifecycle
install:
  - pip install pelican
before_script:
  - git config --global user.email "travis@travis-ci.org"
  - git config --global user.name "TravisCI"
  - git config --global push.default "matching"

# https://docs.travis-ci.com/user/customizing-the-build/#Customizing-the-Build-Step
script:
  - git clone -b master "https://$GITHUB_TOKEN@github.com/easylist/easylist.github.io" output
  - pelican -s publishconf.py -o output content
  - cd output && git add --all . && git commit -m "Publishing content revision $(git --git-dir ../.git rev-parse --short HEAD)" && git push --force origin master:master

